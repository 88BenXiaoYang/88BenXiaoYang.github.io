---
title: SQL基础
date: 2019-01-26 15:10:22
tags: 数据库
categories: 数据库
---

##### 基本概念

注意：**数据库的名称只能使用小写字符。**（实际存储的命名是小写字符，如在命名时有大写字符，在实际存储的时候也会转成小写字符。在PostgreSQL上验证过）

* DBMS主要是通过**数据的保存格式**（数据库种类）来进行分类的，主要有以下五种

```
一、层次型数据库（HDB）（树形结构）
二、关系型数据库（RDB）（采用行列二维表结构来管理数据，使用专门的
SQL（structured Query Language，结构化查询语言）语言对数据进
行操作）（对应的数据库管理系统，是RDBMS，具有代表性的RDBMS有：
Oracle Database[甲骨文]、SQL Server[微软]、DB2[IBM]、
PostgreSQL[开源]、MySQL[开源] ）
三、面向对象数据库（OODB）
四、XML数据库（XMLDB）
五、键值存储系统（Key-Value Store，KVS）
```

关系数据库采用被称为数据库表的二维表来管理数据。用来管理数据的二维表在关系数据库中简称为表，表存储在由RDBMS管理的数据库中，一个数据库中可以存储多个表。

数据库表由表示数据项目的列（字段）和表示一条数据的行（记录）所组成，以记录为单位进行数据读写。（每个字段值[行列交汇的单元格]，只能输入一个数据）

根据SQL语句的内容返回的数据，同样必须是二维表的形式。

* 操作关系数据库表的法则

```
1、关系数据库必须以行为单位进行数据读写
2、在一个单元格中只能输入一个数据
```

* SQL语句的书写规则

```
1、SQL语句要以分号（;）结尾
2、SQL语句不区分大小写（SQL不区分关键字的大小写）
2.1 关键字大写
2.2 表名的首个字母大写
2.3 其余（列名等）小写
3、常数的书写方式是固定的。SQL中的常数，是在SQL语句中直接书写的字
符串、日期或者数字等称为常数。字符串、日期常数需要使用单引号（'）
括起来，数字常数直接书写即可。
4、单词需要用半角空格或者换行来分隔。
```

* SQL语句的命名规则

```
1、只能使用半角英文字母、数字、下划线作为数据库、表和列的名称；
2、名称必须以半角英文字母开头；
3、名称不能重复。
```

* 安全

```
为了防止重要数据被窃读或篡改，RDBMS只允许注册用户接触数据库。
```

* 补充

```
1、所有的列都必须指定数据类型。
2、约束，是除了数据类型之外，对列中存储的数据进行限制或者追加条件的功能。
```

##### 基本操作

* 常用指令

```
创建数据库：create database 数据库名称
删除数据库：drop database 数据库名称
查看已创建的数据库：
select * from pg_database;（postgreSQL下）
show databases;//查看有哪些数据库（MySQL）

查看数据库中已建的表：
select tablename from pg_tables where schemaname='public’;
use databaseName;//指定使用哪个数据库（MySQL）
show tables;//查看指定数据库下都有哪些表（MySQL）
```

* 运算符

```
所有包含NULL的计算，结果肯定是NULL。
（通常情况下除数为零的式子会出错，但有NULL的除法运算中，除数为零时式子不会出错，并且结果为NULL）

大于等于（>=）、小于等于（<=）：不等号在左，等号在右
不等号：<>

SQL不识别“= NULL”和“<> NULL”，对应的运算符是：IS NULL和 IS NOT NULL。

SQL中的逻辑运算是包含对真、假和不确定进行运算的三值逻辑。

逻辑运算结果是真值。（真值就是值为真或假其中之一的值）

算术运算符返回的结果是数字。
```

* 运算符优先级：`and运算优先于or运算执行`

SQL中的逻辑，是三值逻辑（包括真、假、不确定），因加入不确定后，运算结果会比较复杂，所以在建表时，会对相应列进行NOT NULL约束。

聚合函数会将NULL排除在外。但count(*)例外，并不会排除NULL。

```
MAX/MIN函数几乎适用于所有数据类型的列，
SUM/AVG函数只适用于数值类型的列。
```

通常select语句执行结果的显示顺序都是随机的，想要按照某种特定顺序进行排序，需要在select语句中进行指定。

* 子句

```
只有select子句和having子句（以及order by子句）中能够使用聚合函数。

where子句用来指定数据行的条件，having子句用来指定分组的条件。

select子句的执行顺序在group by子句之后，在order by子句之前。
```

* 子句的书写顺序

```
1、select子句->2、from子句->3、where子句->4、group by子句->5、having子句->6、order by子句
```

* select语句的顺序

```
from->where->group by->having->select->order by
```