---
title: Swift
date: 2019-05-27 11:08:36
tags: iOS
categories: iOS
---

### 简介

`Swift` 是支持多编程范式和编译式的语言

`Swift` 的特点：

* 结合`C`和`OC`的优点
* 和`OC`使用相同的运行环境
* 用于开发`OS X`和`iOS`应用程序
* 将`OC`中的`.h`和`.m`文件合并成了一个文件`.swift`文件
* 有类型检查的能力，即可以根据值推出变量的类型 - “类型意识强”

学习`swift`时，可利用利器`Playground`，因其能实时显示结果

Tips:

```
编程范式：编程的模式、方法，编程风格。每种语言根据其特性，有对应的
编程模式、方法，有对应的技术禁止和技术允许。

一种语言，因其语言所具有的特性，可有多种编程范型（编程模式）。如
 c++ 可有过程化编程、面向对象编程、泛型编程。范型元素，即模式元素。
```

### 基本语法

* 使用`import`语句引入任何`OC`框架（或`C`库）
* 程序由多种标记组成，标记包括单词、标识符、常量、字符串、符号
* 注释
  1. 单行注释：`//注释内容`
  2. 多行注释：`/*注释内容*/`

* 分号
  1. 不要求在每行语句的结尾使用分号(;)
  2. 在同一行书写多条语句时，必须用分号隔开，最后一条语句可不用分号结尾

* 标识符
  * 是给变量、常量、方法、函数、枚举、结构体、类、协议等指定的名字
  * 命名规则
     1. 区分大小写
     2. 首字符可以以下划线(_)或者字母开始，但不能是数字
     3. 标识符中其他字符可以是下划线(_)、字母或数字
     4. 如果一定要使用关键字作为标识符，可以在关键字前后添加重音符号(')。注，通常不用关键字作为标识符

* 关键字
  * 是类似于标识符的保留字符序列
  * 关键字是对编译器具有特殊意义的预定义保留标识符
  * 常见的关键字
     1. 与声明有关
     2. 与语句有关，如条件/判断/循环等语句
     3. 表达式和类型
     4. 在特定上下文中使用的关键字

* 空格
  * 对空格的使用有一定的要求，但不像`Python`对缩进的要求那么严格
  * 运算符不能直接跟在变量或常量的后面
  * 运算表达式中空格有断句的作用，在这种情况下使用分号`(;)`来表示一句完整的运算表达式

* 打印输出
  * 使用`print`函数打印输出

### 数据类型

* 有符号浮点数类型
  * `Double`
     1. `64`位浮点数，需要存储很大或很高精度的浮点数时使用此类型
     2. 精确度高，至少有`15`位数字

  * `Float`
     1. `32`位浮点数，对精度要求不高时使用此类型
     2. 最少只有`6`位数字
   
  * 当使用浮点数时，`swift`默认为`Double`类型

* 布尔值，`true/false`

* 字符串，字符的序列集合

* 可选类型`(Optional)`，使用可选类型来处理值可能缺失的情况。可选类型表示有值或没有值

* 类型别名
  * 对当前的类型定义了另一个名字，通过使用`typealias`关键字来定义
  * 语法格式：`typealias newname = type`

* 类型安全
  * `swift`是一种类型安全`(type safe)`的语言
  * 在编译时进行类型检查`(type checks)`，在这期间把不匹配的类型标记为错误

* 类型推断
  * 在没有显示指定类型时，`swift`会使用类型推断`(type inference)`来选择合适的类型
  * `OC`中声明变量时需要指明类型
  * 当推断浮点数的类型时，`swift`总是会选择`Double`而不是`Float`
  * 如果表达式中同时出现了整数和浮点数，会被推断为`Double`类型

* 类型转换
  * 变量类型不同时，若要进行相互赋值时，需要进行显示转换，将数据类型统一为其中的一种类型

* 整数
  * 可正可负的整数，称为有符号整数
  * 只能为正的整数，称为无符号整数

### 知识点

##### 变量

* 变量是占位符，用于引用计算机内存地址
* 类型决定了变量占用内存的大小
* 变量声明
  * 告诉编译器在内存中的哪个位置上为变量创建多大的存储空间
  * 在使用前，用关键字`var`声明它
* 变量命名，规则见“基本语法/标识符/命名规则”
* 变量输出
  * 变量和常量可以使用`print`函数来输出
  * 在字符串中可以使用括号与反斜线来插入变量

##### 常量

* 使用关键字`let`来声明
* 类型标注
  * 说明常量或变量中要存储的值的类型
  * 添加类型标注，需要在常量或变量名后面加上一个冒号和空格，然后加上类型名称，如：`let/var variablename: Type`
* 变量命名，规则见“基本语法/标识符/命名规则”
* 常量需要的开销比变量小
* 常量的值，在编译的时候可以不立即指定，但是只能给它赋值一次

##### 字面量

* 整型字面量
  * 二进制前缀`0b`
  * 八进制前缀`0o`
  * 十六进制前缀`0x`
 
* 浮点型字面量
  * 用指数表示的小数
     1. 十进制表示，指数部分由大写或小写字母`e`为前缀后跟十进制数字串组成，这串数字表示`e`之前的数量乘以`10`的几次方，如：`1.25e2表示1.25*10^2也就是125.0`
     2. 十六进制表示，指数部分由大写或小写字母`p`为前缀后跟十进制数字串组成，这串数字表示`p`之前的数量乘以`2`的几次方，如：`0xFp2表示15*2^2也就是60`

* 布尔型字面量
  * `true 表示真`
  * `false 表示假`
  * `nil 表示没有值`

##### 可选类型`(Optionals)`

* 用于处理值缺失的情况
* `swift`定义后缀`?`作为命名为可选类型`(Optional)`的缩写
* `var optionalInteger: Int? 等价于 var optionalInteger: Optional<Int>`，注：类型和`?`之间没有空格
* 可选类型是一个含有两种情况的枚举，`None`和`Some(T)`
* 任何类型都可以明确声明为可选类型
* 可以使用后缀操作符`!`来访问可选类型的实例变量值
  * 使用操作符`!`去获取值为`nil`的可选变量会有运行时错误
  * 可以用可选链接和可选绑定选择性执行可选表达式上的操作，这种情况下，如果值为`nil`，任何操作都不会执行，也不会有运行报错

* 可选类型类似于`OC`中指针的`nil`值，但是`nil`只对类`(class)`有用，而可选类型对所有类型都可用，并且更安全

* 可选值的强制解析
  * 在确定可选类型确实包含值之后，可在可选的名字后面加一个感叹号`(!)`来获取值
  * 使用`!`来获取一个不存在的可选值会导致运行时错误，因此，使用`!`来强制解析值之前，一定要确定可选包含一个非`nil`的值

* 自动解析，在声明可选变量时使用`!`替换`?`，这样可选变量在使用时就不需要再加`!`来获取值，它会自动解析
* 可选绑定，用来判断可选类型是否包含值，如果包含就把值赋给一个临时常量或变量

##### 运算符

* 算术运算符
  * 除号`(/)`
  * 求余`(%)`
  * `swift3`中已经取消了`++`、`--`，对应的操作符为，`++`对应`+=`，`--`对应`-=`

* 比较运算符
* 逻辑运算符
* 位运算符
  * 用来对二进制位进行操作
  * 取反`(~)`，对操作数的每一位取反
  * 按位与与`(&)`，每个位设为`1`的条件是两个输入数的同一位相同且为`1`时，就设为`1`，反之则为`0`
  * 按位与或`(|)`，每个位设为`1`的条件是只要两个输入数的一位中有一个为`1`时，就设为`1`
  * 按位异或`(^)`，每个位设为`1`的条件是两个输入数的同一位不同，如果相同就设为`0`
  * 按位左移`(<<)`，移动指定位数，空位用`0`填充
  * 按位右移`(>>)`，移动指定位数，空位用`0`填充

* 赋值运算符
* 区间运算符
  * 闭区间运算符`((a...b))`，在迭代一个区间的所有值时是非常有用的，如在`for-in`循环中
  * 半开区间运算符`((a...)`

* 其他运算符
  * 一元运算符。如`!`，在`swift`中用在`Optional`类型取值
  * 二元运算符
  * 三元运算符。如，`a ? b : c`

* 运算符优先级
  * 指针最优，单目运算优于双目运算
  * 先乘除(模)，后加减
  * 先算术，后移位，最后位运算。如，`1 << 3 + 2 & 7 等价于 (1 << (3 + 2)) & 7`
  * 逻辑运算最后计算

##### 循环控制语句

* `continue`语句，告诉一个循环体立刻停止本次循环迭代，重新开始下次循环迭代
* `break`语句，中断当前循环
* `fallthrough`语句，如果在一个`case`执行完后，想要继续执行下面的`case`，需要`fallthrough`(贯穿)关键字

##### 字符串

* 可以使用空的字符串字面量赋值给变量或初始化一个`String`类的实例来初始化一个空的字符串
* 使用字符串属性`isEmpty`来判断字符串是否为空
* 字符串中插入值，可以在其中包含常量、变量、字面量或表达式，插入的字符串字面量的每一项都在以反斜线为前缀的圆括号中，字符串插值是一种构建新字符串的方式
* 字符串可以通过`+`号来连接
* 字符串长度使用`String.count`属性来计算
* 字符串比较，使用`==`来比较两个字符串是否相等
* `Unicode`是一个国际标准，用于文本的编码，`Swift`的`String`类型是基于`Unicode`建立的
* 常用函数
  * `isEmpty` 判空
  * `hasPrefix` 检查是否拥有指定前缀
  * `hasSuffix` 检查是否拥有指定后缀
  * `Int(String)` 转换字符串数字为整型
  * `String.count` 计算字符串长度
  * `+` 连接两个字符串，并返回一个新的字符串
  * `==` 判断两个字符串是否相等
  * `<` 比较两个字符串，对两个字符串的字母逐一比较
  * `utf8、utf16、unicodeScalars、+=、!=`

##### 字符

* `swift`的字符是一个单一的字符字符串字面量，类型为`Character`
* 不能在`Character`类型中存储更多的字符，如：`let/var char: Character = "ABC"`，这样会报错，这种情况下`"ABC"`被当作`String`类型
* 不能创建空的`Character`类型变量或常量，这种情况下，`""`被当作`String`类型
* 可以对字符串进行字符遍历，使用`for-in`遍历字符串中的`character`属性
* 可以对字符串进行字符连接，使用`String`的`append()`方法来实现

##### 数组

* 数组是有序列表，同一类型的多个值
* 相同的值可以多次出现在一个数组的不同位置中
* `Swift`数组会强制检测元素的类型，如类型不同则会报错
* 常量数组的大小和内容都不可以修改
* 数组的索引从`0`开始
* 初始化方式构建的数组中，每个元素的值都是指定的初始值
  * 初始化方式构建数组的语法如下：
  ```
  var someArray = [SomeType](repeating: InitialValue, 
  count: NumberOfElements)//InitialValue是初始值，
  NumberOfElements是数组大小
  ```

* 可以使用`append()`方法或赋值运算符`+=`在数组末尾添加元素
* 遍历数组
  * 使用`for-in`循环来遍历数组中的数据项
  * 如需要每个数据项的值和索引值，可以使用`String`的`enumerate()`方法来进行数组遍历

* 可以使用加法操作符`+`来合并两种已存在的相同类型的数组
* 使用`count`属性，计算数组元素个数
* 使用`isEmpty`属性，来判断数组是否为空

##### 字典

* `swift`字典会强制检测元素的类型
* `swift`字典的`key`没有类型限制可以是整型或字符串，但必须是唯一的
* 常量字典的大小和内容都不可以修改
* 使用`updateValue(forKey:)`增加或更新字典的内容。如果`key`不存在，则添加值，如果`key`存在则修改`key`对应的值，使用`updateValue(forKey:)`时，会返回旧值
* 使用`removeValue(forKey:)`移除`key-value`对，如果`key`存在，该方法返回移除的值，如果不存在返回`nil`。可以通过指定键的值为`nil`来移除`key-value`对
* 使用`enumerate()`方法遍历字典时，获取的`value`是对应的`key-value`对
* 可以对字典的键和值，分别取对应的元素构成的数组
* 使用`count`属性来获知字典有多少个键值对
* 使用`isEmpty`属性来对字典进行判空

##### 函数

* 函数是用来完成特定任务的独立代码块
* 函数的声明和定义
  * 声明，告诉编译器函数的名字、返回类型及参数
  * 定义，提供了函数的实体

* `swift`函数包含了参数类型及返回值类型
* 使用关键字`func`来定义函数
* 函数的实参传递的顺序必须与形参列表相同
* `->`后定义函数的返回值类型
* 元组作为函数返回值
  * 元组与数组类似，不同的是，元组中的元素可以是任意类型，使用的是圆括号
  * 可以用元组`(tuple)`类型让多个值作为一个复合值从函数中返回

* 可以在局部参数名前指定外部参数名，中间以空格分隔，外部参数名用于在函数调用时传递给函数的参数。注，如提供了外部参数名，那么函数在被调用时，必须使用外部参数名

* 可变参数，可变参数通过在变量类型名后面加入`(...)`的方式来定义，如`func vari<N>(members: N...){}`

* 一般默认在函数中定义的参数都是常量参数，即参数只能查询使用，不能改变它的值。若想要改变参数的值，可以在参数定义前加`inout`关键字，这样就可以改变这个参数的值了

* 一般默认的参数传递都是传值调用的，而不是传引用。所以传入的参数在函数内改变，并不影响原来的那个参数，传入的只是这个参数的副本。当传入的参数作为输入输出参数时，需要在参数名前加`&`符，表示这个值可以被函数修改。如，函数调用的时候：`swapTwoInts(&x, &y)`

* 每个函数都有特定的函数类型，由函数的参数类型和返回类型组成

##### 闭包

* 闭包，是自包含的功能代码块，可以在代码中使用或者用来作为参数传值
* 函数和闭包都是引用类型

##### 枚举

* 枚举是一组有共同特性的数据的集合

##### 结构体

* 结构体是一种构造体
* 可以为结构体定义属性(常量、变量)和添加方法，从而扩展结构体的功能
* 结构体总是通过被复制的方式在代码中传递，因此它的值是不可修改的
* 通过关键字`struct`来定义结构体
* 通过结构体名来访问结构体成员
* 结构体实例化使用`let`关键字
* 结构体实例总是通过值传递来定义你的自定义数据类型
* 存在以下条件时，考虑构建结构体
  * 结构体的主要目的是用来封装少量相关简单数据值
  * 有理由预计一个结构体实例在赋值或传递时，封装的数据将会被拷贝而不是被引用
  * 任何在结构体中存储的值类型属性，也将会被拷贝，而不是被引用
  * 结构体不需要去继承另一个已存在类型的属性或行为

* 结构体实例是通过值传递而不是通过引用传递
* 结构体内使用成员属性时，使用`self`关键字

##### 类


  
### 常见知识点总结