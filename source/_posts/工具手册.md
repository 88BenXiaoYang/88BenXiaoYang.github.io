---
title: 工具手册
date: 2019-01-03 09:39:14
tags: iOS
---
常用操作整理，以便使用时查询

* ARC与非ARC兼容的处理

```
项目为非ARC，要往项目中加入ARC代码，在设置环境下为对应的类加上“-fobjc-arc”标签；
项目为ARC，要往项目中加入非ARC代码，在设置环境下为对应的类加上“-fno-objc-arc”标签。
操作步骤：
target   >   build phases   >   compile source
双击需添加标签的*.m文件
在弹出窗口按规则输入：-fobjc-arc 或  -fno-objc-arc
点击done保存
```

* 设置静态库的链接路径

```
在Xcode的Project -> Edit Active Target -> Build -> Search Path -> Library Search Paths中添加静态库目录。
比如"$(SRCROOT)/../libs/Release$(EFFECTIVE_PLATFORM_NAME)"。
$(SRCROOT)宏代表您的工程文件目录，
$(EFFECTIVE_PLATFORM_NAME)宏代表当前配置是OS还是simulator。
$(SRCROOT)(相对路径)
$(SRCROOT)/../(../当前目录的上上级目录)
```

* 库捏合

```
Debug-iphoneos与Debug-iphonesimulator两个版本的静态库捏合成一个：
lipo -create /所在路径/Release-iphoneos/目标文件.a /所在路径/Release-iphonesimulator/目标文件.a -output /要存放整合后文件的位置路径/整合后文件的命名.a
如：
by$ lipo -create /Users/by/Library/Developer/Xcode/DerivedData/xxxyyyzzz/Build/Products/Debug-iphoneos/xxxx.a /Users/by/Library/Developer/Xcode/DerivedData/xxxyyyzzz/Build/Products/Debug-iphonesimulator/xxx.a -output /Users/by/Desktop/yyy.a
```

注：

```
命令与路径间用空格隔开
打包模拟器、真机下的静态库：
需分别选择模拟器、真机环境下编译两次
```

查看静态库所支持的指令集架构：

```
1、cd 静态库所在文件的目录：
如：cd /Users/by/Library/Developer/Xcode/DerivedData/xxxyyyzzz/Build/Products/Debug-iphonesimulator
2、执行命令：
lipo -info xxx.a
会输出如下信息：
input file xxx.a is not a fat file
Non-fat file: xxx.a is architecture: x86_64
by:Debug-iphonesimulator by$ cd /Users/by/Library/Developer/Xcode/DerivedData/xxxyyyzzz/Build/Products/Debug-iphoneos
by:Debug-iphoneos by$ lipo -info xxx.a
Architectures in the fat file: xxx.a are: armv7 arm64
```

关于`lipo`的常用操作：

```
#查看库信息
$ lipo -info /Debug-iphoneos/Someframework.framwork/Someframework
# Architectures in the fat file: Someframework are: armv7 armv7s arm64

#合并
$ lipo –create a.framework b.framework –output output.framework

#拆分
$ lipo –create a.framework -thin armv7 -output a-output-armv7.framework
```

小结：

```
架构：模拟器是 x86_64 i386 真机是 armv7 & arm64

查看库支持的架构：
cd 库所在的目录
lipo -info 库名

要看库更详细的信息：
lipo -detailed_info 库的路径

看库的信息还可以使用：
file 库路径

上述查看库信息的命令对Mach-O文件、静态库.a文件、framework中的.a文件适用

支持64-bit后程序包会变大么？- 会，支持64-bit后，多了一个arm64架构，理论上每个架构一套指令，具体大多少不好说
```

* 压缩图片

```
macOS命令行小工具 -- sips，用于压缩大量高清原图非常方便
（指令截图）将180*180的 png 生成为一个120*120的png：
sips -Z 120 Icon-180.png --out Icon-120.png
1、批量修改图片大小，调整后长边为xxxxpixel，短边按比例自适应，指令：sips -Z xxxx *.JPG（修改后图片会按照比例缩放，不会变形）
2、批量修改图片大小，调整后高xxxxpixel，宽yyyypixel，指令：sips -z xxxx yyyy *.JPG（尺寸 -> 高：宽）（修改后图片可能会发生变形）
3、 带参数 --out DIRNAME ，指定输出目录（指定所存的位置 -> 文件或目录）
注：字母“z”的大小写
```

* 通过Sublime打开指定的文件：

```
cd 到文件所在目录
执行：open -a sublime\text 指定文件
```

* 跳转到商店页面(不同前缀跳转的界面不一样)
  * itms://itunes.apple.com/app/ - 跳转到iTunes Store界面
  * itms-apps://itunes.apple.com/app/ - 跳转到App Store界面
     